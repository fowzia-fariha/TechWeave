<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mentor Dashboard - TechWeave</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  * {
    box-sizing: border-box;
    font-family: 'Plus Jakarta Sans', sans-serif;
    margin: 0;
    padding: 0;
  }

  body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #2d3748;
    min-height: 100vh;
    padding: 20px;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
  }

  .back-button {
    background: rgba(255, 255, 255, 0.7);
    color: #667eea;
    border: none;
    padding: 12px 24px;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 20px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .back-button:hover {
    background: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }

  .header {
    text-align: center;
    color: white;
    margin-bottom: 30px;
  }

  .header h1 {
    font-size: 36px;
    font-weight: 700;
    margin-bottom: 10px;
  }

  .header p {
    font-size: 18px;
    opacity: 0.9;
  }

  .tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .tab-btn {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
    padding: 12px 24px;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .tab-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
  }

  .tab-btn.active {
    background: white;
    color: #667eea;
    border-color: white;
  }

  .tab-content {
    display: none;
    animation: fadeIn 0.3s ease;
  }

  .tab-content.active {
    display: block;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card {
    background: white;
    border-radius: 15px;
    padding: 25px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    margin-bottom: 20px;
  }

  .card h2 {
    font-size: 24px;
    margin-bottom: 20px;
    color: #667eea;
    border-bottom: 2px solid #e2e8f0;
    padding-bottom: 10px;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
  }

  .stat-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    transition: transform 0.3s ease;
  }

  .stat-card:hover {
    transform: translateY(-5px);
  }

  .stat-number {
    font-size: 36px;
    font-weight: 700;
    margin-bottom: 5px;
  }

  .stat-label {
    font-size: 14px;
    opacity: 0.9;
  }

  .student-list, .request-list, .resource-list {
    display: grid;
    gap: 15px;
  }

  .student-item, .request-item, .resource-item {
    background: #f7fafc;
    padding: 15px;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    border-left: 4px solid #667eea;
  }

  .student-item:hover, .request-item:hover, .resource-item:hover {
    background: #edf2f7;
    transform: translateX(5px);
  }

  .item-info h3 {
    font-size: 18px;
    margin-bottom: 5px;
    color: #2d3748;
  }

  .item-info p {
    font-size: 14px;
    color: #718096;
  }

  .badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    margin-left: 10px;
  }

  .badge-online {
    background: #48bb78;
    color: white;
  }

  .badge-offline {
    background: #cbd5e0;
    color: #4a5568;
  }

  .badge-pending {
    background: #ed8936;
    color: white;
  }

  .badge-completed {
    background: #4299e1;
    color: white;
  }

  .btn {
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: #667eea;
    color: white;
  }

  .btn-primary:hover {
    background: #5568d3;
    transform: translateY(-2px);
  }

  .btn-success {
    background: #48bb78;
    color: white;
  }

  .btn-success:hover {
    background: #38a169;
  }

  .btn-danger {
    background: #f56565;
    color: white;
  }

  .btn-danger:hover {
    background: #e53e3e;
  }

  .btn-secondary {
    background: #718096;
    color: white;
  }

  .btn-secondary:hover {
    background: #4a5568;
  }

  .form-group {
    margin-bottom: 20px;
  }

  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #2d3748;
  }

  .form-group input, .form-group textarea, .form-group select {
    width: 100%;
    padding: 12px;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.3s ease;
  }

  .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
    outline: none;
    border-color: #667eea;
  }

  .chart-container {
    background: #f7fafc;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
  }

  .progress-bar {
    height: 8px;
    background: #e2e8f0;
    border-radius: 10px;
    overflow: hidden;
    margin-top: 10px;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    transition: width 0.3s ease;
  }

  .action-buttons {
    display: flex;
    gap: 10px;
  }

  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }

  .modal.active {
    display: flex;
  }

  .modal-content {
    background: white;
    padding: 30px;
    border-radius: 15px;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .close-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #718096;
  }

  .close-btn:hover {
    color: #2d3748;
  }

  .empty-state {
    text-align: center;
    padding: 40px;
    color: #718096;
  }

  .empty-state svg {
    width: 80px;
    height: 80px;
    margin-bottom: 20px;
    opacity: 0.5;
  }

  @media (max-width: 768px) {
    .header h1 {
      font-size: 28px;
    }

    .stats-grid {
      grid-template-columns: 1fr;
    }

    .action-buttons {
      flex-direction: column;
    }

    .student-item, .request-item, .resource-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
  }
</style>
</head>
<body>

<div class="container">
  <!-- Back to Dashboard Button -->
  <button class="back-button" onclick="goBackToDashboard()">
    ‚Üê Back to Dashboard
  </button>

  <div class="header">
    <h1>üéØ Mentor Dashboard</h1>
    <p>Manage students, handle requests & share resources</p>
  </div>

  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('overview')">üìä Overview</button>
    <button class="tab-btn" onclick="switchTab('students')">üë• Students</button>
    <button class="tab-btn" onclick="switchTab('requests')">üìã Help Requests</button>
    <button class="tab-btn" onclick="switchTab('resources')">üìö Resources</button>
    <button class="tab-btn" onclick="switchTab('analytics')">üìà Analytics</button>
  </div>

  <!-- Overview Tab -->
  <div id="overview" class="tab-content active">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="totalStudents">0</div>
        <div class="stat-label">Total Students</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="activeStudents">0</div>
        <div class="stat-label">Active Students</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="pendingRequests">0</div>
        <div class="stat-label">Pending Requests</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalResources">0</div>
        <div class="stat-label">Shared Resources</div>
      </div>
    </div>

    <div class="card">
      <h2>üìå Recent Activity</h2>
      <div id="recentActivity"></div>
    </div>
  </div>

  <!-- Students Tab -->
  <div id="students" class="tab-content">
    <div class="card">
      <h2>üë• Student Management</h2>
      <div class="student-list" id="studentList"></div>
    </div>
  </div>

  <!-- Requests Tab -->
  <div id="requests" class="tab-content">
    <div class="card">
      <h2>üìã Help Requests Queue</h2>
      <div class="request-list" id="requestList"></div>
    </div>
  </div>

  <!-- Resources Tab -->
  <div id="resources" class="tab-content">
    <div class="card">
      <h2>üìö Learning Resources</h2>
      <button class="btn btn-primary" onclick="openAddResourceModal()" style="margin-bottom: 20px;">
        ‚ûï Add New Resource
      </button>
      <div class="resource-list" id="resourceList"></div>
    </div>
  </div>

  <!-- Analytics Tab -->
  <div id="analytics" class="tab-content">
    <div class="card">
      <h2>üìà Student Analytics</h2>
      <div class="chart-container">
        <h3>Learning Path Progress</h3>
        <div id="analyticsData"></div>
      </div>
    </div>
  </div>
</div>

<!-- Student Details Modal -->
<div id="studentModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Student Details</h2>
      <button class="close-btn" onclick="closeModal('studentModal')">&times;</button>
    </div>
    <div id="studentDetails"></div>
  </div>
</div>

<!-- Add Resource Modal -->
<div id="resourceModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Add New Resource</h2>
      <button class="close-btn" onclick="closeModal('resourceModal')">&times;</button>
    </div>
    <form id="resourceForm" onsubmit="addResource(event)">
      <div class="form-group">
        <label>Resource Title</label>
        <input type="text" id="resourceTitle" required>
      </div>
      <div class="form-group">
        <label>Category</label>
        <select id="resourceCategory" required>
          <option value="web">Web Development</option>
          <option value="security">Security</option>
          <option value="ml">Machine Learning</option>
          <option value="docker">Docker & DevOps</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="form-group">
        <label>Resource URL</label>
        <input type="url" id="resourceUrl" required>
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea id="resourceDescription" rows="4" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary" style="width: 100%;">Add Resource</button>
    </form>
  </div>
</div>

<script>
// In-memory data storage
const data = {
  students: [
    { id: 1, username: 'john_doe', email: 'john@sust.edu', status: 'online', progress: 75, lastActive: '2 mins ago' },
    { id: 2, username: 'jane_smith', email: 'jane@sust.edu', status: 'offline', progress: 45, lastActive: '1 hour ago' },
    { id: 3, username: 'alex_wilson', email: 'alex@sust.edu', status: 'online', progress: 90, lastActive: '5 mins ago' },
    { id: 4, username: 'sarah_jones', email: 'sarah@sust.edu', status: 'offline', progress: 60, lastActive: '3 hours ago' }
  ],
  requests: [
    { id: 1, studentName: 'John Doe', topic: 'Docker Setup Issue', priority: 'high', status: 'pending', time: '10 mins ago' },
    { id: 2, studentName: 'Jane Smith', topic: 'Project Template Help', priority: 'medium', status: 'pending', time: '30 mins ago' },
    { id: 3, studentName: 'Alex Wilson', topic: 'ML Model Question', priority: 'low', status: 'completed', time: '2 hours ago' }
  ],
  resources: [
    { id: 1, title: 'Docker Crash Course', category: 'docker', url: 'https://example.com/docker', description: 'Complete Docker guide for beginners', addedBy: 'Mentor' },
    { id: 2, title: 'React Best Practices', category: 'web', url: 'https://example.com/react', description: 'Modern React development patterns', addedBy: 'Mentor' },
    { id: 3, title: 'Security Fundamentals', category: 'security', url: 'https://example.com/security', description: 'Web security basics and OWASP Top 10', addedBy: 'Mentor' }
  ],
  activity: [
    { type: 'request', message: 'New help request from John Doe', time: '10 mins ago' },
    { type: 'student', message: 'Sarah Jones completed Web Development path', time: '1 hour ago' },
    { type: 'resource', message: 'Added new resource: Docker Crash Course', time: '2 hours ago' }
  ]
};

// Back to Dashboard function
function goBackToDashboard() {
  window.location.href = 'dashboard.html';
}

// Initialize dashboard
function initDashboard() {
  updateStats();
  renderStudents();
  renderRequests();
  renderResources();
  renderAnalytics();
  renderActivity();
}

// Update statistics
function updateStats() {
  document.getElementById('totalStudents').textContent = data.students.length;
  document.getElementById('activeStudents').textContent = data.students.filter(s => s.status === 'online').length;
  document.getElementById('pendingRequests').textContent = data.requests.filter(r => r.status === 'pending').length;
  document.getElementById('totalResources').textContent = data.resources.length;
}

// Render students
function renderStudents() {
  const container = document.getElementById('studentList');
  
  if (data.students.length === 0) {
    container.innerHTML = '<div class="empty-state"><p>No students found</p></div>';
    return;
  }

  container.innerHTML = data.students.map(student => `
    <div class="student-item">
      <div class="item-info">
        <h3>${student.username} <span class="badge badge-${student.status}">${student.status}</span></h3>
        <p>üìß ${student.email} ‚Ä¢ Last active: ${student.lastActive}</p>
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${student.progress}%"></div>
        </div>
        <small style="color: #718096;">Progress: ${student.progress}%</small>
      </div>
      <div class="action-buttons">
        <button class="btn btn-primary" onclick="viewStudentDetails(${student.id})">View Details</button>
        <button class="btn btn-secondary" onclick="messageStudent(${student.id})">Message</button>
      </div>
    </div>
  `).join('');
}

// Render requests
function renderRequests() {
  const container = document.getElementById('requestList');
  
  if (data.requests.length === 0) {
    container.innerHTML = '<div class="empty-state"><p>No pending requests</p></div>';
    return;
  }

  container.innerHTML = data.requests.map(request => `
    <div class="request-item">
      <div class="item-info">
        <h3>${request.studentName} <span class="badge badge-${request.status}">${request.status}</span></h3>
        <p>üìå ${request.topic}</p>
        <small style="color: #718096;">Priority: ${request.priority} ‚Ä¢ ${request.time}</small>
      </div>
      <div class="action-buttons">
        ${request.status === 'pending' ? `
          <button class="btn btn-success" onclick="acceptRequest(${request.id})">‚úì Accept</button>
          <button class="btn btn-danger" onclick="declineRequest(${request.id})">‚úó Decline</button>
        ` : `
          <button class="btn btn-secondary" onclick="viewRequestDetails(${request.id})">View Details</button>
        `}
      </div>
    </div>
  `).join('');
}

// Render resources
function renderResources() {
  const container = document.getElementById('resourceList');
  
  if (data.resources.length === 0) {
    container.innerHTML = '<div class="empty-state"><p>No resources shared yet</p></div>';
    return;
  }

  container.innerHTML = data.resources.map(resource => `
    <div class="resource-item">
      <div class="item-info">
        <h3>üìö ${resource.title}</h3>
        <p>${resource.description}</p>
        <small style="color: #718096;">Category: ${resource.category} ‚Ä¢ Added by: ${resource.addedBy}</small>
      </div>
      <div class="action-buttons">
        <button class="btn btn-primary" onclick="window.open('${resource.url}', '_blank')">Open Link</button>
        <button class="btn btn-danger" onclick="deleteResource(${resource.id})">Delete</button>
      </div>
    </div>
  `).join('');
}

// Render analytics
function renderAnalytics() {
  const container = document.getElementById('analyticsData');
  
  container.innerHTML = data.students.map(student => `
    <div style="margin-bottom: 20px;">
      <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
        <span style="font-weight: 600;">${student.username}</span>
        <span style="color: #718096;">${student.progress}%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: ${student.progress}%"></div>
      </div>
    </div>
  `).join('');
}

// Render activity
function renderActivity() {
  const container = document.getElementById('recentActivity');
  
  container.innerHTML = data.activity.map(activity => `
    <div style="padding: 10px; border-left: 3px solid #667eea; margin-bottom: 10px; background: #f7fafc; border-radius: 5px;">
      <p style="font-weight: 600; margin-bottom: 5px;">${activity.message}</p>
      <small style="color: #718096;">${activity.time}</small>
    </div>
  `).join('');
}

// Tab switching
function switchTab(tabName) {
  document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  
  document.getElementById(tabName).classList.add('active');
  event.target.classList.add('active');
}

// Student actions
function viewStudentDetails(id) {
  const student = data.students.find(s => s.id === id);
  document.getElementById('studentDetails').innerHTML = `
    <div class="form-group">
      <label>Username</label>
      <p style="padding: 12px; background: #f7fafc; border-radius: 8px;">${student.username}</p>
    </div>
    <div class="form-group">
      <label>Email</label>
      <p style="padding: 12px; background: #f7fafc; border-radius: 8px;">${student.email}</p>
    </div>
    <div class="form-group">
      <label>Status</label>
      <p style="padding: 12px; background: #f7fafc; border-radius: 8px;">${student.status}</p>
    </div>
    <div class="form-group">
      <label>Learning Progress</label>
      <div class="progress-bar">
        <div class="progress-fill" style="width: ${student.progress}%"></div>
      </div>
      <p style="margin-top: 5px; color: #718096;">${student.progress}% completed</p>
    </div>
    <div class="form-group">
      <label>Last Active</label>
      <p style="padding: 12px; background: #f7fafc; border-radius: 8px;">${student.lastActive}</p>
    </div>
  `;
  openModal('studentModal');
}

function messageStudent(id) {
  const student = data.students.find(s => s.id === id);
  alert(`Opening chat with ${student.username}...`);
  // Redirect to chat page with student ID
  // window.location.href = `chat.html?student=${id}`;
}

// Request actions
function acceptRequest(id) {
  const request = data.requests.find(r => r.id === id);
  request.status = 'completed';
  renderRequests();
  updateStats();
  alert(`Accepted request from ${request.studentName}`);
}

function declineRequest(id) {
  const requestIndex = data.requests.findIndex(r => r.id === id);
  if (requestIndex !== -1) {
    const studentName = data.requests[requestIndex].studentName;
    data.requests.splice(requestIndex, 1);
    renderRequests();
    updateStats();
    alert(`Declined request from ${studentName}`);
  }
}

function viewRequestDetails(id) {
  const request = data.requests.find(r => r.id === id);
  alert(`Request Details:\nStudent: ${request.studentName}\nTopic: ${request.topic}\nStatus: ${request.status}`);
}

// Resource actions
function openAddResourceModal() {
  openModal('resourceModal');
}

function addResource(event) {
  event.preventDefault();
  
  const newResource = {
    id: data.resources.length + 1,
    title: document.getElementById('resourceTitle').value,
    category: document.getElementById('resourceCategory').value,
    url: document.getElementById('resourceUrl').value,
    description: document.getElementById('resourceDescription').value,
    addedBy: 'Mentor'
  };
  
  data.resources.push(newResource);
  renderResources();
  updateStats();
  closeModal('resourceModal');
  document.getElementById('resourceForm').reset();
  alert('Resource added successfully!');
}

function deleteResource(id) {
  if (confirm('Are you sure you want to delete this resource?')) {
    const index = data.resources.findIndex(r => r.id === id);
    if (index !== -1) {
      data.resources.splice(index, 1);
      renderResources();
      updateStats();
    }
  }
}

// Modal functions
function openModal(modalId) {
  document.getElementById(modalId).classList.add('active');
}

function closeModal(modalId) {
  document.getElementById(modalId).classList.remove('active');
}

// Close modal when clicking outside
window.onclick = function(event) {
  if (event.target.classList.contains('modal')) {
    event.target.classList.remove('active');
  }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  // Check if user is a mentor
  const token = localStorage.getItem('token');
  if (!token) {
    alert('Please login first');
    window.location.href = 'login.html';
    return;
  }

  // In production, verify mentor role from backend
  // For now, initialize dashboard
  initDashboard();
});
</script>

</body>
</html>